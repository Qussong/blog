# 타일바니아 Tilevania

2D 플랫폼 게임 프로젝트 중 하나로 타일맵 기능을 활용해서 클래식한 사이드 스크롤 방식의 게임을 만드는 데 초점을 맞추고 있다.</br>

### 📌타일맵을 위한 이미지 자르기

#### Pixel Per Unit
설정된 픽셀이 하나의 유니티 단위에 상응함을 의미한다.</br>
값이 커질수록 더 많은 픽셀이 하나의 유니티 단위에 상응하기에 월드에서의 크기가 줄어든다.</br>

#### 아틀라스 이미지 자르기 ver1 (Automatic)
```
이미지 선택 -> Sprite Mode : Multiple 적용 -> "Open Sprite Editor" 클릭 -> Slice 탭 선택 (Type: Automatic, Pivot : Center) -> "Apply" 클릭
```

#### 아틀라스 이미지 자르기 ver2 (Grid By Cell Size)
```
ver1 과 동일... -> Slice 탭 선택 (Type: Grid By Cell Size, Pivot : Center) -> "Apply" 클릭
```
![slice_grid by cell size](img/post/250708/gridByCellSize.png)
![slice_grid by cell size](img/post/250708/gridByCellSize2.png)

### 📌 타일맵

#### Tilemap Pipeline
타일맵을 생성하는 순서는 아래와 같다.</br>
```plainText
Sprite Sheet -> Sliced Sprite -> Tile Asset -> Tile Palette -> Tilemap(Scene)
```
- Palette : 여러 개의 Tile 을 모아둔 도구창으로 타일을 선택하고 배치할 수 있는 공간
- Tile : Sprite 를 기반으로 만든 타일맵에 배치 가능한 오브젝트
- Sprite : 2D 그래픽 이미지로 타일맵에서 사용할 기본 이미지 조각

#### Tilemap, Tile Palette Asset 생성 & Tile Asset 배치하기
```plainText
1. 월드에 타일맵 생성하기
    Hierarchy 창 우클릭 -> 2D Object -> Tilemap -> Rectangular

2. Tile Palette 창 열기
    Window -> 2D -> Tile Palette -> Create New Tile Palette

3. Tile Asset 생성
    Sprite Sheet 에서 Slice 한 요소들을 팔레트에 드래그 앤 드롭하여 타일애셋을 생성한다.

4. 월드에 타일 애셋 배치하기
    Palette 에서 Paint with active brush(B) 를 선택하여 월드에 있는 타일맵에 배치하기
```
![tile palette](img/post/250708/tilePalette.png)
![tile asset](img/post/250708/tileAsset.png)
![tile asset result](img/post/250708/tileAssetResult.png)

#### 타일 애셋 편집하여 새로운 타일 애셋 생성하기
원하는 형태가 없다면 타일맵에 배치하여 수정할 수도 있지만, 팔레트에서 이미지를 수정하여 새로운 애셋을 생성할 수도 있다.</br>
![tile asset edit](img/post/250708/tileAssetEdit.png)

### 📌 레이어
배경 타일을 타일맵에 배치하고 싶을때 미리 배치해둔 발판을 배경 타일이 가리는 경우 레이어를 활용하여 이를 해결 할 수 있다.</br> 
![layer need](img/post/250708/layerNeed.png)

#### case 1) Order in Layer
Hierarchy 창에서 TileMap 객체를 선택하고 Inspector 에서 **Order in Layer** 의 값을 수정한다.</br>
<!-- 하지만, 이 방법은 레이어를 얼마나 추가할지 모르는 상태에선 적합한 방법이 아니다. -->

#### case 2) Add Layer
Hierarchy 창에서 Layer 를 추가해준다. (기본값은 Default)</br>
Add Layer 창에 들어가면 Layer 종류가 다양한데, 그 중 Sorting Layers 항목에 새로운 레이어를 추가해준다</br>
![sorting layers](img/post/250708/sortingLayers.png)
Tile map 애셋의 Inspector 창에서 Tilemap Renderer 의 Additional Settings/Sorting Layer 의 값을 수정해준다. 이후, Sorting Layers 에서 Layer 들의 순서를 조정해줌으로써 화면에서 어떤 Layer 가 앞에 그려져야하는지 설정해준다.</br>


